<!doctype html>

<html ng-app="myApp">
    <head>
        <meta charset="utf-8">
        <title> broker status chart</title>

        <link href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">

        <style>
        .table tbody > tr > td {
            vertical-align: middle;
        }
        </style>
    </head>d

    <body>
        <div ng-controller="DefaultCtrl" ng-init="init()">
            <nav class="navbar navbar-default navbar-fixed-top">
                <div class="container">
                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

                        <ul class="nav navbar-nav navbar-right">
                            <li><a href="#">{{ known_words.length }}</a></li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">menu <span class="caret"></span></a>
                                <ul class="dropdown-menu" role="menu">
                                    <li><a href="#" ng-click="printKnown()">Known Words</a></li>
                                    <li class="divider"></li>
                                    <li><a href="#" ng-click="printUnknown()">Unknown</a></li>
                                </ul>
                            </li>
                        </ul>

                    </div>
                </div>
            </nav>

            <div class="container">

                <table class="table table-condensed">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Key</th>
                            <th>Actions</th>
                            <th>Explanation</th>
                        </tr>
                    </thead>
                    <tbody id="work-area">
                        <tr ng-repeat="w in words">
                            <td class="col-sm-1 col-md-1">{{ $index + 1 }}</td>
                            <td class="col-sm-1 col-md-1">{{ w.key }}</td>
                            <td class="col-sm-2 col-md-2">
                                <button class="btn btn-default btn-sm" ng-click="add(w.key)">confrim</button></td>
                            <td class="col-sm-8 col-md-8">&nbsp;</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.15/angular.min.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.2/moment.min.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/js/bootstrap.min.js"></script>

        <script type="text/javascript">
            angular.module("myApp", [])
                .controller('DefaultCtrl', function($scope, $http) {

                    $scope.known_words = new Array();
                    $scope.words = new Array();

                    $scope.init = function() {
                        $http.get("./wlist.json").success(function(data) {
                            $scope.words = data;
                        });
                    }

                    $scope.add = function(word) {
                        $scope.known_words.push(word);
                    }

                    $scope.printKnown = function() {
                        console.log(_.map($scope.known_words, function(d) { return d.key; }));
                    }

                    $scope.printUnknown = function() {
                        var known = _.map($scope.known_words, function(d) { return d.key; });
                        var all = _.map($scope.words, function(d) { return d.key; })

                        console.log(_.difference(all, known));
                    }

                });
        </script>

    </body>
</html>
